{
  "version": 3,
  "sources": ["../../node_modules/.pnpm/@neos-project+neos-ui-extensibility@8.3.7/node_modules/@neos-project/neos-ui-extensibility/src/readFromConsumerApi.ts", "../../node_modules/.pnpm/@neos-project+neos-ui-extensibility@8.3.7/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react-redux/index.js", "../../node_modules/.pnpm/@neos-project+neos-ui-extensibility@8.3.7/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/neos-ui-redux-store/index.js", "../../node_modules/.pnpm/@neos-project+neos-ui-extensibility@8.3.7/node_modules/@neos-project/neos-ui-extensibility/src/shims/vendor/react/index.js", "../../node_modules/.pnpm/@neos-project+neos-ui-extensibility@8.3.7/node_modules/@neos-project/neos-ui-extensibility/src/shims/neosProjectPackages/react-ui-components/index.js", "../../node_modules/.pnpm/@neos-project+neos-ui-extensibility@8.3.7/node_modules/@neos-project/neos-ui-extensibility/src/index.ts", "../Private/Editor/manifest.js", "../Private/Editor/makeButton.tsx"],
  "sourcesContent": [null, null, null, null, null, null, "import manifest from \"@neos-project/neos-ui-extensibility\";\nimport { connect } from \"react-redux\";\nimport { actions, selectors } from \"@neos-project/neos-ui-redux-store\";\nimport makeButton from \"./makeButton\";\n\nconst connector = connect(\n    (state) => {\n        return {\n            documentNode: selectors.CR.Nodes.documentNodeSelector(state),\n            editPreviewMode: selectors.UI.EditPreviewMode.currentEditPreviewMode(state),\n        };\n    },\n    {\n        setEditPreviewMode: actions.UI.EditPreviewMode.set,\n    },\n);\n\nmanifest(\"Carbon.PreviewMode:Button\", {}, (globalRegistry, { frontendConfiguration }) => {\n    const configurations = frontendConfiguration[\"Carbon.PreviewMode:Button\"];\n\n    if (!configurations || typeof configurations !== \"object\") {\n        return;\n    }\n    const containerRegistry = globalRegistry.get(\"containers\");\n    const i18nRegistry = globalRegistry.get(\"i18n\");\n    const nodeTypesRegistry = globalRegistry.get(\"@neos-project/neos-ui-contentrepository\");\n    const fallbackNodeTypeName = \"Neos.Neos:Document\";\n\n    for (const viewEditModeName in configurations) {\n        let settings = configurations[viewEditModeName];\n        if (settings === true) {\n            settings = {\n                nodeTypeName: fallbackNodeTypeName,\n            };\n        }\n        if (!settings?.nodeTypeName) {\n            settings.nodeTypeName = fallbackNodeTypeName;\n        }\n        const position = settings?.position || \"start\";\n        const Button = makeButton({ viewEditModeName, settings, i18nRegistry, nodeTypesRegistry });\n        containerRegistry.set(`SecondaryToolbar/Right/${viewEditModeName}`, connector(Button), position);\n    }\n});\n", "import React, { useEffect, useState } from \"react\";\nimport { IconButton } from \"@neos-project/react-ui-components\";\n\nexport default function makeButton({ viewEditModeName, settings, i18nRegistry, nodeTypesRegistry }) {\n    return function Button({ documentNode, editPreviewMode, setEditPreviewMode }) {\n        const [shouldRender, setShouldRender] = useState(false);\n        const icon = settings?.icon || \"fas fa-pencil\";\n        const label = settings?.label || null;\n        const nodeTypeName = settings.nodeTypeName;\n        const registry = nodeTypesRegistry?._registry;\n        const documentNodeType = documentNode.nodeType;\n\n        useEffect(() => {\n            // nodeTypesRegistry.isOfType(documentNode.nodeType, nodeTypeName) doesn't return superTypes\n            // so we need to implement our own function to check if the node has the mixin\n            setShouldRender(hasMixin({ documentNodeType, nodeTypeName, registry }));\n\n            // this will cause the current page to reload, but it's a protection\n            // mechanism prevent this mode to be activated on page that has not this node type\n            if (shouldRender === false && editPreviewMode === viewEditModeName) {\n                setEditPreviewMode(\"inPlace\");\n            }\n        }, [documentNode]);\n\n        if (!shouldRender) {\n            return null;\n        }\n\n        const title = label ? i18nRegistry.translate(label) : null;\n\n        return (\n            <IconButton\n                icon={icon}\n                isPressed={editPreviewMode === viewEditModeName}\n                aria-label={title}\n                title={title}\n                onClick={() => {\n                    setEditPreviewMode(editPreviewMode === viewEditModeName ? \"inPlace\" : viewEditModeName);\n                }}\n            />\n        );\n    };\n}\n\nfunction hasMixin({ documentNodeType, nodeTypeName, registry }) {\n    if (documentNodeType === nodeTypeName) {\n        return true;\n    }\n    for (const item of registry) {\n        if (item.key !== documentNodeType) {\n            continue;\n        }\n        const superTypes = item?.value?.superTypes;\n        if (!superTypes) {\n            return false;\n        }\n        for (const key in superTypes) {\n            if (key == nodeTypeName) {\n                return superTypes[key];\n            }\n        }\n        return false;\n    }\n    return false;\n}\n"],
  "mappings": "27BAAc,SAAP,oBAAqC,IAAW,CACnD,MAAO,IAAI,OAAe,CACtB,GAAK,OAAe,qBAAqB,GAAM,OAAe,qBAAqB,EAAE,IAAI,GAAG,EAAE,EAC1F,OAAQ,OAAe,qBAAqB,EAAE,IAAI,GAAG,EAAE,EAAE,GAAG,IAAI,EAGpE,MAAM,IAAI,MAAM,8EAA+E,CACnG,CACJ,CARA,sLCAA,sOAEA,OAAO,QAAU,oBAAoB,QAAQ,EAAC,EAAG,cCFjD,mQAEA,OAAO,QAAU,oBAAoB,qBAAqB,EAAC,EAAG,oBCF9D,0NAEA,OAAO,QAAU,oBAAoB,QAAQ,EAAC,EAAG,SCFjD,mQAEA,OAAO,QAAU,oBAAoB,qBAAqB,EAAC,EAAG,qBCD9D,2BAMA,IAAA,aAAe,oBAAoB,UAAU,ECN7C,uBAAwB,+BACxB,2BAAmC,uCCFnC,iBAA2C,yBAC3C,2BAA2B,uCAEZ,SAAR,WAA4B,CAAE,iBAAkB,SAAU,aAAc,iBAAkB,EAAG,CAChG,OAAO,SAAgB,CAAE,aAAc,gBAAiB,kBAAmB,EAAG,CAC1E,GAAM,CAAC,aAAc,eAAe,KAAI,uBAAS,EAAK,EAChD,KAAO,UAAU,MAAQ,gBACzB,MAAQ,UAAU,OAAS,KAC3B,aAAe,SAAS,aACxB,SAAW,mBAAmB,UAC9B,iBAAmB,aAAa,SActC,MAZA,wBAAU,IAAM,CAGZ,gBAAgB,SAAS,CAAE,iBAAkB,aAAc,QAAS,CAAC,CAAC,EAIlE,eAAiB,IAAS,kBAAoB,kBAC9C,mBAAmB,SAAS,CAEpC,EAAG,CAAC,YAAY,CAAC,EAEb,CAAC,aACD,OAAO,KAGX,IAAM,MAAQ,MAAQ,aAAa,UAAU,KAAK,EAAI,KAEtD,OACI,aAAAA,QAAA,cAAC,uCACG,KACA,UAAW,kBAAoB,iBAC/B,aAAY,MACZ,MACA,QAAS,IAAM,CACX,mBAAmB,kBAAoB,iBAAmB,UAAY,gBAAgB,CAC1F,EACJ,CAER,CACJ,CAEA,SAAS,SAAS,CAAE,iBAAkB,aAAc,QAAS,EAAG,CAC5D,GAAI,mBAAqB,aACrB,MAAO,GAEX,QAAW,QAAQ,SAAU,CACzB,GAAI,KAAK,MAAQ,iBACb,SAEJ,IAAM,WAAa,MAAM,OAAO,WAChC,GAAI,CAAC,WACD,MAAO,GAEX,QAAW,OAAO,WACd,GAAI,KAAO,aACP,OAAO,WAAW,GAAG,EAG7B,MAAO,EACX,CACA,MAAO,EACX,CD3DA,IAAM,aAAY,4BACb,QACU,CACH,aAAc,qCAAU,GAAG,MAAM,qBAAqB,KAAK,EAC3D,gBAAiB,qCAAU,GAAG,gBAAgB,uBAAuB,KAAK,CAC9E,GAEJ,CACI,mBAAoB,mCAAQ,GAAG,gBAAgB,GACnD,CACJ,EAEA,aAAS,4BAA6B,CAAC,EAAG,CAAC,eAAgB,CAAE,qBAAsB,IAAM,CACrF,IAAM,eAAiB,sBAAsB,2BAA2B,EAExE,GAAI,CAAC,gBAAkB,OAAO,gBAAmB,SAC7C,OAEJ,IAAM,kBAAoB,eAAe,IAAI,YAAY,EACnD,aAAe,eAAe,IAAI,MAAM,EACxC,kBAAoB,eAAe,IAAI,yCAAyC,EAChF,qBAAuB,qBAE7B,QAAW,oBAAoB,eAAgB,CAC3C,IAAI,SAAW,eAAe,gBAAgB,EAC1C,WAAa,KACb,SAAW,CACP,aAAc,oBAClB,GAEC,UAAU,eACX,SAAS,aAAe,sBAE5B,IAAM,SAAW,UAAU,UAAY,QACjC,OAAS,WAAW,CAAE,iBAAkB,SAAU,aAAc,iBAAkB,CAAC,EACzF,kBAAkB,IAAI,0BAA0B,gBAAgB,GAAI,UAAU,MAAM,EAAG,QAAQ,CACnG,CACJ,CAAC",
  "names": ["React"]
}
